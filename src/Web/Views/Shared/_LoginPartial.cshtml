@using Microsoft.AspNetCore.Identity
@using Microsoft.eShopWeb.Infrastructure.Identity
@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager

<section class="col-lg-5 col-md-6 col-xs-12">
    <div class="esh-identity d-flex align-items-center justify-content-end" style="display:flex;align-items:center;justify-content:flex-end;gap:12px;">
        <div class="esh-identity-item" style="display:inline-flex;align-items:center;">
            @await Component.InvokeAsync("Basket")
        </div>
        @if (SignInManager.IsSignedIn(User))
        {
            <div class="esh-identity-item" style="display:inline-flex;align-items:center;">
                <span class="esh-identity-name esh-identity-name--upper">Hello @UserManager.GetUserName(User)!</span>
            </div>
            <div class="esh-identity-item" style="display:inline-flex;align-items:center;">
                <form asp-area="Identity" asp-page="/Account/Logout" method="post" id="logoutForm" class="navbar-right" style="margin:0;">
                    <button type="submit" class="esh-identity-button">Logout</button>
                </form>
            </div>
        }
        else
        {
            <div class="esh-identity-item" style="display:inline-flex;align-items:center;">
                <a class="esh-identity-link" asp-area="Identity" asp-page="/Account/Register">Register</a>
            </div>
            <div class="esh-identity-item" style="display:inline-flex;align-items:center;">
                <a class="esh-identity-link" asp-area="Identity" asp-page="/Account/Login">Login</a>
            </div>
        }
    </div>
</section>
